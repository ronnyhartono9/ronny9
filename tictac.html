<html>
<meta name="theme-color"content="gold"/>
<meta name="viewport"content="width=device-width,initial-scale=0.6">
    <head> 
        <script type="text/javascript">
            class playerr{ 
            } 
            var giliran = 0; // ganjil lingkaran,genap x
            var namapemenang = "";//oop disini
            function change(x,y){
                giliran++;
                if(giliran % 2 ==0){
                    document.getElementById(x+","+y).value = "O";
                    
                }else{
                    document.getElementById(x+","+y).value = "X";
                }
                document.getElementById(x+","+y).disabled  = true;
                cek();
            }

             function make(){giliran = 0;
                document.getElementById("p1").innerHTML = "0";
                document.getElementById("p2").innerHTML = "0";
                 var b= document.getElementById("jum").value;
                 var table = document.getElementById("tab");
           
                var c = table.rows.length;
                for(i=0;i<=c-1;i++){ 
                    try {
                        table.deleteRow(0);
                    }
                    catch(err) { 
                        alert('adaa');
                      }
                }
                for(i=0;i<=b-1;i++){
                    var row = table.insertRow(i);
                    for(j=0;j<=b-1;j++){
                        var cell1 = row.insertCell(j);
                            cell1.innerHTML = "<input onclick=change("+i+","+j+") id="+ i+","+j+" style=' border-radius:10px; background:gold; width:100%;height:50px'type='button'>";
                    }
                }
                
             }

             function cek(){
                //baris
                    var table = document.getElementById("tab");
                    var c = table.rows.length;
                    var first ="";
                    for(i=0;i<=c-1;i++){
                        first = document.getElementById(i+","+0).value;                    
                        var br = true;
                            for(j=0;j<=c-1;j++){
                                if(document.getElementById(i+","+j).value != first || document.getElementById(i+","+j).value== "")
                                { br= false;}
                            }
                            if(br){                            
                                    for(x=0;x<=c-1;x++){
                                        if( document.getElementById(i+","+x).value == "X"){
                                         

                                            if( document.getElementById(i+","+x).style.backgroundColor != "blue"){
                                                document.getElementById(i+","+x).style.backgroundColor = "blue";
                                                document.getElementById(i+","+x).style.color = "white";
                                                document.getElementById("p1").innerHTML = 
                                                parseInt(document.getElementById("p1").innerHTML) + 1;
                                             }
                                        }else{
                                          

                                            if( document.getElementById(i+","+x).style.backgroundColor != "red"){
                                                document.getElementById(i+","+x).style.backgroundColor = "red";
                                                document.getElementById(i+","+x).style.color = "white";
                                                document.getElementById("p2").innerHTML = 
                                                parseInt(document.getElementById("p2").innerHTML) + 1;
                                             }                                                 
                                        }
                                        
                                    }
                            }
                    }

                //kolom
                    var table = document.getElementById("tab");
                    var c = table.rows.length;
                    var first ="";
                    for(i=0;i<=c-1;i++){
                        first = document.getElementById(0+","+i).value;                    
                        var br = true;
                            for(j=0;j<=c-1;j++){
                                if(document.getElementById(j+","+i).value != first || document.getElementById(j+","+i).value== "")
                                { br= false;}
                            }
                            if(br){
                                    for(x=0;x<=c-1;x++){
                                        if( document.getElementById(x+","+i).value == "X"){
                                            if( document.getElementById(x+","+i).style.backgroundColor != "blue"){
                                                document.getElementById(x+","+i).style.backgroundColor = "blue";
                                                document.getElementById(x+","+i).style.color = "white";
                                                document.getElementById("p1").innerHTML = 
                                                parseInt(document.getElementById("p1").innerHTML) + 1; 
                                                document.getElementById("p1").innerHTML = Math.ceil(
                                                parseInt(document.getElementById("p1").innerHTML)/ c);  
                                             } 
                                        }else{
                                            if( document.getElementById(x+","+i).style.backgroundColor != "red"){
                                                document.getElementById(x+","+i).style.backgroundColor = "red";
                                                document.getElementById(x+","+i).style.color = "white";
                                                document.getElementById("p2").innerHTML = 
                                                (parseInt(document.getElementById("p2").innerHTML) + 1) ;
                                                document.getElementById("p2").innerHTML = Math.ceil(
                                                parseInt(document.getElementById("p2").innerHTML)/ c);
                                            }
                                        }
                                         
                                    }
                            }
                    }
                    
                //diagonal kiri
                    var table = document.getElementById("tab");
                    var c = table.rows.length;
                    var first =document.getElementById(0+","+0).value;                  
                    var br = true;
                    for(i=0;i<=c-1;i++){//baris
                        for(j=0;j<=c-1;j++){//kolom
                           if( i==j){
                               if( document.getElementById(i+","+j).value == ""){br=false; }
                               if( document.getElementById(i+","+j).value !=first ){
                                br=false;
                               }
                           }
                        }
                    }
                    if(br){
                        for(i=0;i<=c-1;i++){//baris
                            for(j=0;j<=c-1;j++){//kolom
                                if( i==j){
                                    if( document.getElementById(i+","+j).value == "X"   ){
                                        namapemenang = "player 1"; //oop disini
                                        if( document.getElementById(i+","+j).style.backgroundColor != "blue"){
                                            document.getElementById(i+","+j).style.backgroundColor = "blue";
                                            document.getElementById(i+","+j).style.color = "white";
                                            document.getElementById("p1").innerHTML = parseInt(document.getElementById("p1").innerHTML) + 1;
                                        } 
                                    }else{
                                        if( document.getElementById(i+","+j).style.backgroundColor != "red"){
                                            namapemenang = "player 2";//oop disini
                                            document.getElementById(i+","+j).style.backgroundColor = "red";
                                            document.getElementById(i+","+j).style.color = "white";
                                            document.getElementById("p2").innerHTML = parseInt(document.getElementById("p2").innerHTML) + 1;
                                        }
                                    } 
                                }
                            }
                        }
                        alert('permainan berakhir dan dimenangkan oleh '+namapemenang);make();
                    }
                //diagonal kanan
                    var table = document.getElementById("tab");
                    var c = table.rows.length;
                    var first =document.getElementById((c-1)+","+0).value;
                    var br = true;
                    for(i=0;i<=c-1;i++){   //baris
                        for(j=0;j<=c-1;j++){    //kolom
                           if( i+j == c-1 ){
                            if( document.getElementById(i+","+j).value == ""){br=false; }
                            if( document.getElementById(i+","+j).value !=first ){
                                br=false;
                            }
                           }
                        }
                    }
                    if(br){                        
                        for(i=0;i<=c-1;i++){   //baris
                            for(j=0;j<=c-1;j++){    //kolom
                                if( i+j == c-1 ){
                                    if( document.getElementById(i+","+j).value == "X"   ){namapemenang = "player 1";//oop disini
                                        if( document.getElementById(i+","+j).style.backgroundColor != "blue"){
                                            document.getElementById(i+","+j).style.backgroundColor = "blue";
                                            document.getElementById(i+","+j).style.color = "white";
                                            document.getElementById("p1").innerHTML = parseInt(document.getElementById("p1").innerHTML) + 1;
                                        } 
                                    }else{
                                        if( document.getElementById(i+","+j).style.backgroundColor != "red"){namapemenang = "player 2";//oop disini
                                            document.getElementById(i+","+j).style.backgroundColor = "red";
                                            document.getElementById(i+","+j).style.color = "white";
                                            document.getElementById("p2").innerHTML =( parseInt(document.getElementById("p2").innerHTML) + 1);

                                        }
                                    }                                     
                                }
                            }
                        }
                        alert('permainan berakhir dan dimenangkan oleh '+namapemenang);//oop disini
                        make();
                    }

             }
             //yang diagonal pertama kali pasti menang 
             function cek_stop(){
                 // cek baris yang masih kosong atau bisa diisi seragam
                 // cek kolom yang masih kosong atau bisa diisi seragam
             }
        </script>
    </head>

    <body>  
        <Center>
            <table  style="width: 100%;height: 100%;">
                <tr style="height: 10%; text-align: center;">
                    <td colspan="3"style="color:blue;background-color: rgb(217, 209, 224);">
                        Masukan jumlah <input type="text"id="jum"> <input type="button"value="masuk"onclick="make()"> 
                    </td>
                </tr>
                <tr style="height: 10%; text-align: center;">
                        <td><strong>Player 1 (X) <br> Score : <a id="p1"> 0</a></strong></td>
                        <td> </td>
                        <td><strong>Player 2 (O) <br> Score : <a id="p2"> 0</a></strong></td> 
                </tr>
                <Tr>
                     <td colspan=3 style="width: 100%; vertical-align: top;"align="center" ><table   style=" width: 100%;" id="tab"></table></td>
                </Tr>
            </table>
    </Center>
    </body>
</html>
